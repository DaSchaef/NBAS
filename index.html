<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>NBAS by DaSchaef</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>NBAS</h1>
        <h2>NBAS - NAMI Bezirks API Sammlung</h2>
        <a href="https://github.com/DaSchaef/NBAS" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="nbas" class="anchor" href="#nbas" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>NBAS</h1>

<p>NBAS - NAMI Bezirks API Sammlung, Eine kleine Sammlung des Codes, den wir im DPSG Bezirk Kurpfalz benutzen, um unsere Emailverteiler anhand der NAMI Daten zu setzen.</p>

<h1>
<a id="lizenz" class="anchor" href="#lizenz" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Lizenz</h1>

<p>Ich habe den Code unter GPL gestellt in dem Gedanke, dass wir DPSGler miteinander teilen sollen. Hier möchte ich euch auch noch einmal auf <a href="http://ncm.dpsg.de">http://ncm.dpsg.de</a> hinweisen,
auch wenn es dort nicht sehr aktiv aussehen mag, dort lesen einige Entwickler mit. Also traut euch!</p>

<h1>
<a id="danksagung" class="anchor" href="#danksagung" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Danksagung</h1>

<p>Ein großes Dankeschön an Daniel von der der AG NCM und an fabianlipp für sein tolles fabianlipp/jnami.</p>

<h1>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h1>

<p>NBAS ist eine kleine Scriptsammlung, die aus NAMI die Emailadressen der Leiter unseres Bezirks extrahieren und in Mailman einspielen soll.
Im jetzigen Zustand ist NBAS dafür ausgelegt von der Konsole aus ausgeführt zu werden.
Dadurch müssen die Stammesvorstände nur noch ein Datensatz verwalten und können trotzdem sicher sein, dass auch die Bezirks-Emails bei der Leiterrunde ankommen.</p>

<p>Die NBAS Mailman Schnittstelle hält im TMP Verzeichnis die Mailman-Mitglieder unter GIT Verwaltung.
Dies is ein Sicherheits-Feature, damit notfalls schnell Änderungen rückgängig gemacht werden können.</p>

<h1>
<a id="datenschutz" class="anchor" href="#datenschutz" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Datenschutz</h1>

<p>Bitte beachtet, dass die temporären Dateien im tmp Verzeichnis unter GIT Kontrolle gehalten werden.
Aus Gründen des Datenschutzes solltet ihr das Verzeichnis regelmäßig leeren (nicht löschen!) und dabei auch
das GIT Repository (.git Ordner) löschen.
NBAS legt automatisch dann beim nächsten Mal ein GIT Repository wieder an.</p>

<h1>
<a id="requirements--voraussetzungen" class="anchor" href="#requirements--voraussetzungen" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Requirements / Voraussetzungen</h1>

<p>Für NBAS wird benötigt</p>

<ul>
<li>git</li>
<li>mailman</li>
<li>php</li>
<li>php-curl</li>
<li>Ein API Zugang (siehe <a href="http://ncm.dpsg.de">http://ncm.dpsg.de</a>)</li>
<li>Schreibrecht im Ordner ./tmp (für Mailman und NAMI cookies)</li>
</ul>

<h1>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h1>

<ul>
<li>In Zielverzeichnis gehen</li>
<li>Download NBAS:
<code>git clone https://github.com/DaSchaef/NBAS.git</code>
</li>
<li>config.php.template kopieren nach config.php</li>
<li>In config.php die notwendigen Einstellungen/Zugangsdaten setzen</li>
<li>NBAS ausführen mit:
<code>php index.php</code>
</li>
<li>Bitte beachte, dass das TMP Verzeichnis .tmp beschreibbar sein muss für Session-Cookies und die Mailman Dateien.</li>
</ul>

<h1>
<a id="einstellungen" class="anchor" href="#einstellungen" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Einstellungen</h1>

<ul>
<li><p><code>$config["namiserver"]</code>
URL unter der NAMI erreichbar ist</p></li>
<li><p><code>$config["apiuser_mitgliedsnummer"]</code>
Die Mietgliednummer des Nutzers der API Rechte hat</p></li>
<li><p><code>$config["apiuser_password"]</code>
Das entsprechende Passwort des Nutzers</p></li>
<li><p><code>$config["tmpdir"]</code>
Das temporäre Verzeichnis muss beschreibbar sein.
NBAS speichert dort die NAMI Session Cookies und verwatet dort (unter GIT Kontrolle) die Mitgliederlisten der Mailing-Listen als Textdatei.</p></li>
<li><p><code>$config["mailliste_additional_dir"]</code>
In diesem Verzeichnis sucht NBAS nach einer Textdatei mit dem Namen der Mailingliste. In dieser Textdatei stehen Emailadresse. Pro Zeile eine Emailadresse. Ist eine solche Textdatei vorhanden, liest NBAS diese Zeile für Zeile ein und versucht die Emailadressen zur Mailingliste (definiert durch den Dateinamen) hinzuzufügen.</p></li>
<li><p><code>$config["mailliste_mapping"]</code>
Hier wird das Mapping von NAMI Einstellungen zu Mailman-Liste gemacht.
Ein Beispiel ist in der config.php.template zu finden.</p></li>
<li><p><code>$config["skipssl"]</code>
Nicht empfohlen! Nur ändern, wenn du dir sicher bist und die folgende Erklärung und deren Auswirkung verstanden hast!
Wenn diese Einstellung auf true gesetzt wird, dann wird das HTTPS (SSL) Zertifikat von NAMI nicht überprüft.
Das kann bedeuten, dass sich ein Fremder/Hacker als NAMI dir gegenüber ausgeben könnte (z.b. in einem öffentlichen WLAN)
und du würdest es nicht bemerken.
Als Konsequenz daraus könnte dieser Hacker dann deine NAMI Login-Zugangsdaten aufzeichnen und hätte damit dein NAMI Zugang.
Warum gibt es dann diese Funktion?
Unser Server Betriebssystem "Debian" hat zur Zeit einen ungelöste Bug, der selten auftritt, aber ausgerechnet mit NAMI ;)
Egal ob richtig oder falsch: Durch deb Bug denkt die Software <em>immer</em>, dass das NAMI Zertifikat gefälscht sei - so kommt man natürlich
überhaupt nicht an NAMI.
Bis der Bug in "Debian" gefixt ist, gibt es also diese Option - nochmal: LEIDER!</p></li>
</ul>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/DaSchaef/NBAS/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/DaSchaef/NBAS/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/DaSchaef/NBAS"></a> is maintained by <a href="https://github.com/DaSchaef">DaSchaef</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
